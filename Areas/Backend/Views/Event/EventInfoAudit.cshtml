@using Microsoft.Extensions.Configuration
@inject IConfiguration Configuration

@model BASE.Areas.Backend.Models.VM_Event
@{
}
@section CustomScripts
    {

    <script type="text/javascript">
        $(document).ready(function () {
        @*檔案上傳物件*@
                $('.File').each(function () {
                    $(this).FileInputCus({
                        dropZoneEnabled: false
                    });
                });
            if ('@Model.EventInfoItem.activity.Category' == '活動') {
                $("#spLecturerInfo").hide();
                $('#EventInfoItem_activity_LecturerInfo').attr('data-parsley-required', 'false');
            }

            $('#frm').on('submit', function () {

            });
        });

    </script>
}

    <div class="card">
        <div class="card-body">
        @using (Html.BeginForm(FormMethod.Post, new { id = "frm", @autocomplete = "off", @enctype = "multipart/form-data", @data_parsley_validate = "" }))
        {
            @Html.AntiForgeryToken()
            <div class="row">
                <div class="col-12 form-group mb-3">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.Category, "類型：", new { @class = "form-label" })<br>
                    @Html.RadioButtonFor(x=>x.EventInfoItem.activity.Category,"課程",new{ data_parsley_required = "",disabled="disabled"})課程
                    @Html.RadioButtonFor(x=>x.EventInfoItem.activity.Category,"講座",new{ data_parsley_required = "",disabled="disabled"})講座
                    @Html.RadioButtonFor(x=>x.EventInfoItem.activity.Category,"活動",new{ data_parsley_required = "",disabled="disabled"})活動
                </div>
                <div class="col-12 form-group mb-3">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.Qid, "選擇所需的滿意度問卷", new { @class = "form-label" })
                    @Html.DropDownListFor(x=>x.EventInfoItem.activity.Qid,Model.ddlQuiz,new{@class="form-control",id="ddlQuiz", data_parsley_required = "", data_parsley_errors_container="#errors-container-1" ,disabled="disabled"})
                    <div id="errors-container-1"></div>
                </div>
                <div class="col-12 form-group mb-3">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.RegStartDate, "報名區間", new { @class = "form-label" })
                    <div class="row col-6">
                        <div class="col">
                            @Html.TextBoxFor(x => x.EventInfoItem.activity.RegStartDate, "{0:yyyy-MM-dd}", new { @class="form-control",@type="date",placeholder = "年/月/日", data_parsley_required = "",disabled="disabled"})
                        </div>
                        <div class="col">
                            @Html.TextBoxFor(x => x.EventInfoItem.activity.RegEndDate, "{0:yyyy-MM-dd}", new { @class="form-control",@type="date", placeholder = "年/月/日", data_parsley_required = "",disabled="disabled"})
                        </div>
                    </div>
                </div>
                <div class="col-12 form-group mb-3">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.Title, "活動標題", new { @class = "form-label" })
                    @Html.TextBoxFor(x => x.EventInfoItem.activity.Title, new { @class="form-control", placeholder = "請輸入活動標題", data_parsley_required = "" ,disabled="disabled"})
                </div>
                <div class="col-12 form-group mb-3">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.Subject, "活動主題", new { @class = "form-label" })
                    @Html.TextBoxFor(x => x.EventInfoItem.activity.Subject, new { @class="form-control", placeholder = "請輸入活動主題", data_parsley_required = "" ,disabled="disabled"})
                </div>
                <div class="col-12 form-group mb-3">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.DateType, "活動半/全日", new { @class = "form-label" })<br>
                    @Html.RadioButtonFor(x=>x.EventInfoItem.activity.DateType,"半日",new{ data_parsley_required = "",disabled="disabled"})半日
                    @Html.RadioButtonFor(x=>x.EventInfoItem.activity.DateType,"全日",new{ data_parsley_required = "",disabled="disabled"})全日
                </div>
                <div class="col-12 form-group mb-3">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.Id, "活動日期、時段及活動參與模式", new { @class = "form-label" })
                    <table class="table">
                        <thead>
                            <tr>
                                <th>日期</th>
                                <th>時段起</th>
                                <th>時段訖</th>
                                <th>活動參與模式</th>
                            </tr>
                        </thead>
                        <tbody id="tb_Section">
                            @if (Model.EventInfoItem.sectionExtendList != null && Model.EventInfoItem.sectionExtendList.Any())
                            {
                                for (var i = 0; i < Model.EventInfoItem.sectionExtendList.Count; i++)
                                {
                                    <tr>
                                        <td>
                                            @Html.TextBoxFor(x => x.EventInfoItem.sectionExtendList[i].sectionDay, "{0:yyyy-MM-dd}", new { @class="form-control",@type="date" ,placeholder = "請輸入活動日期",data_parsley_required = "",disabled="disabled"})
                                        </td>
                                        <td>
                                            @Html.TextBoxFor(x => x.EventInfoItem.sectionExtendList[i].startTime,"{0:hh:mm}", new { @class="form-control",@type="time", placeholder = "請輸入時段起",data_parsley_required = "",disabled="disabled"})
                                        </td>
                                        <td>
                                            @Html.TextBoxFor(x => x.EventInfoItem.sectionExtendList[i].endTime,"{0:hh:mm}", new { @class="form-control",@type="time", placeholder = "請輸入時段訖",data_parsley_required = "",disabled="disabled"})
                                        </td>
                                        <td>
                                            @Html.DropDownListFor(x=>x.EventInfoItem.sectionExtendList[i].sectionType,Model.ddlEventType,new{@class="form-control", data_parsley_required = "", data_parsley_errors_container="#errors-container-1",disabled="disabled" })
                                        </td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>
                <div class="col-12 form-group mb-3">
                    <span class="red" id="spLecturerInfo">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.LecturerInfo, "講師資訊", new { @class = "form-label" })
                    @Html.TextBoxFor(x => x.EventInfoItem.activity.LecturerInfo, new {@class="form-control", placeholder = "請輸入講師資訊", data_parsley_required = "" ,disabled="disabled"})
                </div>
                <div class="col-12 form-group mb-3">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.ActivityImage, "活動圖片", new { @class = "form-label" })
                    @Html.TextBoxFor(x => x.ActivityImageFile, new { @FileID = "ActivityImage", @class="form-control File", @type = "file", accept = ".pnf,.jpg,.jpeg", data_parsley_file_type="png,jpg,jpeg", data_parsley_errors_container="#ActivityImage-errors-container" ,disabled="disabled" })
                    @Html.HiddenFor(x => x.EventInfoItem.activity.ActivityImage, new { @id ="ActivityImage" })
                    <div id="ActivityImage-errors-container"></div>
                </div>
                <div class="col-12 form-group mb-3">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.Description, "活動簡介", new { @class = "form-label" })
                    @Html.TextAreaFor(x => x.EventInfoItem.activity.Description, new { @class="form-control", placeholder = "請輸入活動簡介", data_parsley_required = "",disabled="disabled"})
                </div>
                <div class="col-12 form-group mb-3">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.Quota, "報名名額", new { @class = "form-label" })
                    @Html.TextBoxFor(x => x.EventInfoItem.activity.Quota, new {@class="form-control", placeholder = "請輸入報名名額", data_parsley_required = "" ,disabled="disabled"})
                </div>
                <div class="col-12 form-group mb-3">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.RegisterFor, "報名對象", new { @class = "form-label" })
                    @Html.TextBoxFor(x => x.EventInfoItem.activity.RegisterFor, new {@class="form-control", placeholder = "請輸入報名對象", data_parsley_required = "",disabled="disabled" })
                </div>
                <div class="col-12 form-group mb-3">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.Place, "活動地點", new { @class = "form-label" })
                    @Html.TextBoxFor(x => x.EventInfoItem.activity.Place, new {@class="form-control", placeholder = "請輸入活動地點", data_parsley_required = "",disabled="disabled" })
                </div>
                <div class="col-12 form-group mb-3" id="div_EntityFile" style="display:none">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.FileForEntity, "上傳行前通知信壓縮檔(for實體參與者)", new { @class = "form-label" })
                    @Html.TextBoxFor(x => x.EntityFile, new { @FileID = "FileForEntity", @class="form-control File", @type = "file", data_parsley_errors_container="#entity-errors-container",disabled="disabled" })
                    @Html.HiddenFor(x => x.EventInfoItem.activity.FileForEntity, new { @id ="FileForEntity" })
                    <div id="entity-errors-container"></div>
                </div>
                <div class="col-12 form-group mb-3" id="div_OnlineFile" style="display:none">
                    <span class="red">*</span>
                    @Html.LabelFor(x => x.EventInfoItem.activity.FileForOnline, "上傳行前通知信壓縮檔(for線上參與者)", new { @class = "form-label" })
                    @Html.TextBoxFor(x => x.OnlineFile, new { @FileID = "FileForOnline", @class="form-control File", @type = "file", data_parsley_errors_container="#online-errors-container",disabled="disabled" })
                    @Html.HiddenFor(x => x.EventInfoItem.activity.FileForOnline, new { @id ="FileForOnline" })
                    <div id="online-errors-container"></div>
                </div>

                <div class="form-group">
                    @if (Model.EventInfoItem.activity.IsValid)
                    {// 已經通過
                        <button type="submit" class="btn btn-warning">退回待修改</button>
                    }else
                    {// 審核通過
                        <button type="submit" class="btn btn-primary">審核通過</button>
                    }
                    <a class="btn btn-light" href="@(Url.Action("EventInfoManage", "Event"))">回上一頁</a>
                </div>
            </div>
        }
    </div>
</div>
